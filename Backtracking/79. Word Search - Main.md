---
ParentTask:
  - "[[backtracking]]"
---

# LeetCode
[79. Word Search](https://leetcode.com/problems/word-search/)

# Answer：走過的地方在 board 標記，退回的時候還原 board 上面字串
## V1 - 只使用 check Pass Index 是否等於 word.size() -> 這個寫法比較好
```Cpp
#define CHAR_TO_MARK_USED_POS '#'
class Solution {
private:
    bool checkWordOnBoard(vector<vector<char>>& board, int row, int col, 
                            string &word, int checkStartIdx) {
        // if the position out of the board
        if( row < 0 || row >= board.size() || col < 0 || col >= board[0].size() ) return false;

        // if the check char idx exceeds word range
        if(checkStartIdx >= word.size()) return false;
       
        // check the word on the assigned idx
        if( word[ checkStartIdx ] != board[row][col] ) return false;
        checkStartIdx++;

        // if the check Idx reaches the end of the word
        if( checkStartIdx == word.size() ) return true;

        // mark the used board to invalid char
        char bkpBoardChar = board[row][col];
        board[row][col] = CHAR_TO_MARK_USED_POS;
        
        // check the adjacent position
        bool checkPass = false;
        if( !checkPass ) checkPass = checkWordOnBoard( board, row+1, col, word, checkStartIdx );
        if( !checkPass ) checkPass = checkWordOnBoard( board, row-1, col, word, checkStartIdx );
        if( !checkPass ) checkPass = checkWordOnBoard( board, row, col+1, word, checkStartIdx );
        if( !checkPass ) checkPass = checkWordOnBoard( board, row, col-1, word, checkStartIdx );
        
        // cancel the mark of the used position
        board[row][col] = bkpBoardChar;
        
        // return check result
        return checkPass;
    }
public:
    bool exist(vector<vector<char>>& board, string word) {
        // if word length exceeds the board grid num
        if(word.size() > (board.size() * board[0].size()) ) return false;
        
        // try each position on the board as start point
        for(int row = 0; row < board.size(); row++) {
            for(int col = 0; col < board[row].size(); col++) {
                if( checkWordOnBoard(board, row, col, word, 0) ) return true;
            }
        }
        return false;
    }
};
```

## V2 - 額外一個 string 記錄 checkPass SubStr + 檢查 check Pass Len 是否等於 word.size -> 這個寫法比較不好
- **checkPass SubStr** 其實沒有意義，因為這個變數就是和 word 的 sub str -> **其實只需要 check Pass Len 就可以了**
```Cpp
class Solution {
private: 
    bool traverseCheckBoard( int row, int col, auto &board, string &word, 
                string &checkPassSubWord, int checkPassLen) {

        // checked pass length = word length
        if(checkPassLen == word.size()) return true;

        // invalid position
        if(row < 0 || row >= board.size()) return false;
        if(col < 0 || col >= board[row].size()) return false;
    
        // word[i] not match
        if(board[row][col] != word[checkPassLen]) return false;

        // push back check passed char
        checkPassSubWord[checkPassLen++] = board[row][col];

        // mark used board
        board[row][col] = '#';

        // traverse to next position
        bool checkPass = false;
        if(!checkPass) checkPass = traverseCheckBoard(row-1, col, board, word, checkPassSubWord, checkPassLen);
        if(!checkPass) checkPass = traverseCheckBoard(row+1, col, board, word, checkPassSubWord, checkPassLen);
        if(!checkPass) checkPass = traverseCheckBoard(row, col-1, board, word, checkPassSubWord, checkPassLen);
        if(!checkPass) checkPass = traverseCheckBoard(row, col+1, board, word, checkPassSubWord, checkPassLen);

        // un-mark used board (restore from the last checked valid index = checkPasslen - 1)
        board[row][col] = checkPassSubWord[checkPassLen-1];

        // pop out last char
        checkPassLen--;

        // return check result
        return checkPass;
    }
public:
    bool exist(vector<vector<char>>& board, string word) {

        string checkPassSubWord = word;

        for(int row = 0; row < board.size(); row++) {
            for(int col = 0; col < board[row].size(); col++) {
                if(traverseCheckBoard( row, col, board, word, checkPassSubWord, 0)) return true;
            }
        }

        return false;
    }
};
```