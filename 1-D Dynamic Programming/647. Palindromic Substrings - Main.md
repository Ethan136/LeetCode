---
ParentTask:
  - "[[1-d_dynamic_programming]]"
---

# LeetCode
[647. Palindromic Substrings](https://leetcode.com/problems/palindromic-substrings/)

# Concetp
Palindrome： 可以從兩端往內檢查到中間，**也可以從中間逐漸往兩邊拓展**

# Answer：Expand Palindrome from Center (not use DP)
## V1：寫比較詳細
```Cpp
class Solution {
private:

    int getPalindromCntCenterFromIdx(string& s, int leftCenterIdx, int rightCenterIdx) {

        // (0) check size of string & whether the center index is valid
        if(s.empty() || leftCenterIdx < 0 || rightCenterIdx >= s.size() || s[leftCenterIdx] != s[rightCenterIdx]) return 0;

        // (1) Even Len ABBA
        int palindromTryExpandSize = 1;
        int palindromExpandSuccessSize = 0;
        while( (leftCenterIdx - palindromTryExpandSize) >= 0 && (rightCenterIdx + palindromTryExpandSize) < s.size() ) {
            
            // preview the expanded str from center index
            if( s[leftCenterIdx - palindromTryExpandSize] != s[rightCenterIdx + palindromTryExpandSize] ) break;

            // update the successfully expanded cnt
            palindromExpandSuccessSize = palindromTryExpandSize;
            
            // lengthen the check range
            palindromTryExpandSize++;
        }

        // (2) export result: "only center palindrom" + "expanded palindrom"
        return (1 + palindromExpandSuccessSize);
    }

    int getPalindromCntCenterFromIdx(string& s, int leftCenterIdx) {

        // (1) check odd length cnt
        int cntOfOddPalindrom = getPalindromCntCenterFromIdx(s, leftCenterIdx, leftCenterIdx);

        // (1) check even length cnt
        int cndOfEvenPalinDrom = getPalindromCntCenterFromIdx(s, leftCenterIdx, (leftCenterIdx+1));

        // (2) return total count
        return (cntOfOddPalindrom + cndOfEvenPalinDrom);
    }
    
public:
    int countSubstrings(string s) {
        int palindromCnt = 0;
        
        for(int i = 0; i < s.size(); i++) {
            palindromCnt += getPalindromCntCenterFromIdx(s, i);
        }
        
        return palindromCnt;
    }
};
``` 

## V2：寫比較簡潔
### V2.1：複習1st
```Cpp
class Solution {
public:
    int countSubstrings(string s) {
        // lambda func for palindrome check
        auto checkPalinDromeCnt = [](string &s, int leftCenter, int rightCenter) {

            int palindromeCnt = 0;
            for(int l = leftCenter, r = rightCenter; 
                (l <= r) && (l >= 0) && (l < s.size()) && (r >= 0) && (r < s.size());
                l--, r++) {
                if(s[l] != s[r]) break;
                palindromeCnt++;
            }
            return palindromeCnt;
        };

        // check each index i as center
        int palindromeCnt = 0;
        for(int i = 0; i < s.size(); i++) {
            // odd center
            palindromeCnt += checkPalinDromeCnt(s, i, i);

            // even center
            palindromeCnt += checkPalinDromeCnt(s, i, i+1);
            
        }

        // finish
        return palindromeCnt;
    }
};
```

### V2.2：複習2nd
```Cpp
class Solution {
public:
    int countSubstrings(string s) {
        auto checkExpandPalindromeCnt = [](auto &s, int l, int r) {
            if(l > r) return 0;

            int cnt = 0;
            while((0 <= l) && (r < s.size())) {
                if(s[l] != s[r]) break;
                cnt++;
                l--, r++;
            }
            return cnt;
        };

        int totalCnt = 0;
        for(int i = 0; i < s.size(); i++) {
            // single mid
            totalCnt += checkExpandPalindromeCnt(s, i, i);

            // double mid
            totalCnt += checkExpandPalindromeCnt(s, i, i+1);
        }
        return totalCnt;
    }
};
```