---
ParentTask:
  - "[[graphs]]"
---

# LeetCode
[323. Number of Connected Components in an Undirected Graph](https://leetcode.com/problems/number-of-connected-components-in-an-undirected-graph/)

# Concept
- 一開始先當做一個 node 是一個 component，並假設所有 component 都不相連
- **每當有兩個 component 相連 -> 減少一個 un-connected component num**

# Answer：DFS Union Search
```Cpp
class Solution {
private:
    int travAndCompressToFirstParent(vector<int> &compToRootComp, int compIdx) {
        // if component root is component itself
        if(compToRootComp[ compIdx ] == compIdx) return compIdx;

        // traverse to parent
        int rootCompIdx = travAndCompressToFirstParent(compToRootComp, compToRootComp[ compIdx ]);

        // link component to ever root component directly
        compToRootComp[ compIdx ] = rootCompIdx;

        // get root component
        return rootCompIdx;
    }
public:
    int countComponents(int n, vector<vector<int>>& edges) {
        vector<int> compToRootComp(n);
        for(int i = 0; i < n; i++) compToRootComp[i] = i;

        int unConnectedCompCnt = n;
        for(auto &edge : edges) {
            int rootComp0 = travAndCompressToFirstParent(compToRootComp, edge[0]);
            int rootComp1 = travAndCompressToFirstParent(compToRootComp, edge[1]);

            if(rootComp0 == rootComp1) continue;
            compToRootComp[rootComp0] = rootComp1;
            unConnectedCompCnt--;
        }

        return unConnectedCompCnt;
    }
};

```