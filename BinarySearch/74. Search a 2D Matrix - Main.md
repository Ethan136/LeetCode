# LeetCode
[74. Search a 2D Matrix](https://leetcode.com/problems/search-a-2d-matrix/)

# Answer: 把 Matrix 當成一個 Sequence 操作，並且透過座標轉換把 Sequence 轉換成 col / row index
## V1 - 寫法比較複雜，func 計算 overall idx -> row / col，func 外面透過 row / col 取得 matrix value
```Cpp
class Solution {
public:
	void ConvertSeqIdxToRowAndCol(int ElmtSeq, int col_elmt_num, int& row_idx, int& col_idx) {
		row_idx = (ElmtSeq / col_elmt_num);
		col_idx = (ElmtSeq - row_idx * col_elmt_num);
	}
	bool searchMatrix(vector<vector<int>>& matrix, int target) {
		int row_num = matrix.size();
		int col_num = matrix[0].size();
		int matrixElmtNum = row_num * col_num;

		int head, tail, mid;
		for(head = 0, tail = matrixElmtNum-1, mid = (head+tail)*0.5;
			head < (tail-1);
			mid = (head+tail)*0.5) {
			
			int hRow, hCol; ConvertSeqIdxToRowAndCol(head, col_num, hRow, hCol);
			int tRow, tCol; ConvertSeqIdxToRowAndCol(tail, col_num, tRow, tCol);
			int mRow, mCol; ConvertSeqIdxToRowAndCol(mid , col_num, mRow, mCol);

#ifdef DEBUG_EN
			cout << "------------------------" << endl;
			cout << "head | " << head << " | hRow " << hRow << " | hCol " << hCol << endl;
			cout << "tail | " << tail << " | tRow " << tRow << " | tCol " << tCol << endl;
#endif
			if(matrix[mRow][mCol] == target) return true;

			if(matrix[mRow][mCol] < target) head = mid;

			if(target < matrix[mRow][mCol]) tail = mid;
		}

		int rowFinal, colFinal;
		ConvertSeqIdxToRowAndCol(head, col_num, rowFinal, colFinal);
		if(matrix[rowFinal][colFinal] == target) return true;

		ConvertSeqIdxToRowAndCol(tail, col_num, rowFinal, colFinal);
		if(matrix[rowFinal][colFinal] == target) return true;

		else return false;
	}
};
``` 
- **Debug 輸出資訊可以集中在一塊，並且用 define 做開關**
- Sequence to row / column
	- row index = Sequence / (matric col number)
	- col index = Sequence - (row index * matrix col number)
	- *座標轉換的部分可以獨立寫一個 func，比較好維護*


## V2 - 寫法比較簡單，func 內直接從 overall idx 取得 matrix value
```Cpp
class Solution {
private:
    int getMatrixValFromOverallIdx(auto &matrix, int overallIdx) {
        // overall idx / columm num -> overall idx / element per row
        int rowIdx = overallIdx / matrix[0].size();

        // overall idx % column num -> overall idx / element per row
        int colIdx = overallIdx % matrix[0].size();

        // fetch value from matrix
        return matrix[rowIdx][colIdx];
    }
public:
    bool searchMatrix(vector<vector<int>>& matrix, int target) {
        int rowNum = matrix.size(), colNum = matrix[0].size();

        int head, tail;
        for(head = 0, tail = (rowNum * colNum - 1);
            head < tail-1;) {

            int mid = (head + tail) * 0.5;
            int midVal = getMatrixValFromOverallIdx(matrix, mid);

            if(midVal == target) return true;
            if(midVal < target) head = mid;
            else tail = mid;
        }

        if(getMatrixValFromOverallIdx(matrix, head) == target) return true;
        if(getMatrixValFromOverallIdx(matrix, tail) == target) return true;
        return false;
    }
};
```

## V3：複習2nd - 模板化寫法
```Cpp
class Solution {
private:
    int getMatrixValFromElmtIdx(auto &matrix, int idx) {
        if(matrix.size() == 0) return INT_MIN;
        int rowNum = matrix.size();

        if(matrix[0].size() == 0) return INT_MIN;
        int colNum = matrix[0].size();

        int row = idx / colNum;
        if(row >= rowNum) return INT_MIN;

        int col = idx % colNum;
        if(col >= colNum) return INT_MIN;

        return matrix[row][col];
    }
public:
    bool searchMatrix(vector<vector<int>>& matrix, int target) {
        int rowNum = matrix.size();
        int colNum = matrix[0].size();

        int head, tail, mid;
        for(head = 0, tail = (rowNum * colNum - 1), mid = (head+tail)/2;
            head < (tail - 1);
            mid = (head+tail)/2) {

            int midVal = getMatrixValFromElmtIdx(matrix, mid);
            
            // (0) Val(mid) = target
            if(midVal == target) return true;

            // (1) Val(mid) = [Val(head), target]
            if(midVal < target) {
                head = mid;
            }
            // (2) Val(mid) = [target, tail]
            else {
                tail = mid;
            }
        }

        if(getMatrixValFromElmtIdx(matrix, head) == target) return true;
        if(getMatrixValFromElmtIdx(matrix, tail) == target) return true;
        return false;
    }
};
```